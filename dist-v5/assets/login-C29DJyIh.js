import{r,c as d,a,n as v,t as u,k as i,y as p,f as w,o as m}from"./index-b-6tx6qQ.js";import{u as y,c as k}from"./user-BpiRJn06.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-FOn4UwqS.js";const h={class:"auth-container"},x={class:"auth-form"},S={class:"div-group"},V={class:"form-group"},D={key:0,class:"form-group"},M=["disabled"],U={key:0,class:"status-message"},B={__name:"login",setup(C){const t=r(!0),c=w(),s=r({username:"",password:"",email:""}),f=r(!1),n=r(""),_=()=>{t.value=!t.value,s.value={username:"",password:"",email:""},n.value=""},g=async()=>{if(t.value){const o=new FormData;o.append("grant_type","password"),o.append("scope","auth:read_basic auth:read_all auth:write auth:delete file:read file:upload file:write file:delete isyourday:read isyourday:write isyourday:delete"),o.append("username",s.value.username),o.append("password",s.value.password);const e=await y(o);console.log(e),localStorage.setItem("token_type",e.data.token_type),localStorage.setItem("access_token",e.data.access_token),e.status>=200&&e.status<300&&c.push("/")}else(await k({email:s.value.email,username:s.value.username,password:s.value.password})).status===200&&(t.value=!0)};return(o,e)=>(m(),d("div",h,[a("div",x,[a("h2",null,u(t.value?"登录":"注册"),1),a("div",null,[a("div",S,[e[3]||(e[3]=a("label",{for:"username"},"用户名",-1)),i(a("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=l=>s.value.username=l)},null,512),[[p,s.value.username]])]),a("div",V,[e[4]||(e[4]=a("label",{for:"password"},"密码",-1)),i(a("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=l=>s.value.password=l)},null,512),[[p,s.value.password]])]),t.value?v("",!0):(m(),d("div",D,[e[5]||(e[5]=a("label",{for:"email"},"邮箱",-1)),i(a("input",{type:"email",id:"email","onUpdate:modelValue":e[2]||(e[2]=l=>s.value.email=l)},null,512),[[p,s.value.email]])])),a("button",{onClick:g,disabled:f.value},u(t.value?"登录":"注册"),9,M)]),a("p",{class:"toggle-mode",onClick:_},u(t.value?"没有账号？点击注册":"已有账号？点击登录"),1),n.value?(m(),d("div",U,u(n.value),1)):v("",!0)])]))}},F=b(B,[["__scopeId","data-v-e8015d6b"]]);export{F as default};
