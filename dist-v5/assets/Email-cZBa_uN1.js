import{_ as St,a as ye,U as ue,b as ze,j as xl,y as _l,J as At,h as se,k as ea,l as ta,I as la,z as Ve,W as aa,X as Ie,N as na,Y as oa,T as sa,A as _t,Z as ia,s as el,c as ra,m as ua,K as ca,n as da,V as fa,o as va,S as Te,E as ma,w as pa,f as ha}from"./base-B1x2bpfq.js";import{E as ga}from"./el-progress-DXs9OTnb.js";import{E as ba}from"./el-button-3LcmKSGv.js";import{t as Pt,i as ya,c as Sa,u as wa,e as Oa,f as Va,b as Ia,d as Ea,E as Ta,a as Ma}from"./el-select-DrxOIgem.js";import{u as Ht,E as Ca,B as Ra,d as za,C as La,a as Na}from"./el-tag-DjpAT_K6.js";import{d as Le,c as oe,o as A,t as re,E as Ae,p as D,i as y,q as ce,a as z,l as de,H as tl,U as ll,r as I,V as xe,u as C,I as we,J as ka,Z as Oe,K as Pe,F as _e,P as Wt,x as wt,_ as $a,$ as Da,L as ie,a0 as Fa,b as P,m as Kt,Y as He,a1 as al,C as Se,O as Qe,a2 as Ut,a3 as Ze,a4 as Ba,k as Xe,w as j,a5 as Aa,a6 as Pa,a7 as Ha,n as he,j as be,B as vt,g as et,Q as Be,y as nl,v as Wa,a8 as jt,M as Ka,s as Ua}from"./index-b-6tx6qQ.js";import{s as ja}from"./event-BglcN_vc.js";import{g as Ga,b as qa}from"./user-BpiRJn06.js";import{d as Gt,E as Qa,g as Za,p as qt}from"./EditEmail-noM6IYva.js";import{_ as Ya}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as ol,U as sl,u as Xa,d as Qt,i as Ye}from"./vnode-sIyvmkMX.js";import{c as il,r as rl}from"./raf-Bo6rU8aI.js";import"./request-FOn4UwqS.js";const Ja=Le({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:ye("select")}}});function xa(e,l,a,o,u,r){return A(),oe("div",{class:D(e.ns.be("group","title")),style:Ae({...e.style,lineHeight:`${e.height}px`})},re(e.item.label),7)}var _a=St(Ja,[["render",xa],["__file","group-item.vue"]]);function en(e,{emit:l}){return{hoverItem:()=>{e.disabled||l("hover",e.index)},selectOptionClick:()=>{e.disabled||l("select",e.item,e.index)}}}const ul={label:"label",value:"value",disabled:"disabled",options:"options"};function at(e){const l=y(()=>({...ul,...e.props}));return{aliasProps:l,getLabel:c=>ue(c,l.value.label),getValue:c=>ue(c,l.value.value),getDisabled:c=>ue(c,l.value.disabled),getOptions:c=>ue(c,l.value.options)}}const tn=ze({allowCreate:Boolean,autocomplete:{type:se(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:At,default:ta},effect:{type:se(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:se([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:se(Array),required:!0},placeholder:{type:String},teleported:Ht.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:se(Object),default:()=>({})},remote:Boolean,size:ea,props:{type:se(Object),default:()=>ul},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:se(String),values:Ca,default:"bottom-start"},fallbackPlacements:{type:se(Array),default:["bottom-start","top-start","right","left"]},tagType:{...Pt.type,default:"info"},tagEffect:{...Pt.effect,default:"light"},tabindex:{type:[String,Number],default:0},appendTo:Ht.appendTo,fitInputWidth:{type:[Boolean,Number],default:!0,validator(e){return la(e)||Ve(e)}},suffixIcon:{type:At,default:_l},...xl,...Xa(["ariaLabel"])}),ln=ze({data:Array,disabled:Boolean,hovering:Boolean,item:{type:se(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),an={[sl]:e=>!0,[ol]:e=>!0,"remove-tag":e=>!0,"visible-change":e=>!0,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0},nn={hover:e=>Ve(e),select:(e,l)=>!0},Ot=Symbol("ElSelectV2Injection"),on=Le({props:ln,emits:nn,setup(e,{emit:l}){const a=tl(Ot),o=ye("select"),{hoverItem:u,selectOptionClick:r}=en(e,{emit:l}),{getLabel:c}=at(a.props);return{ns:o,hoverItem:u,selectOptionClick:r,getLabel:c}}});function sn(e,l,a,o,u,r){return A(),oe("li",{"aria-selected":e.selected,style:Ae(e.style),class:D([e.ns.be("dropdown","item"),e.ns.is("selected",e.selected),e.ns.is("disabled",e.disabled),e.ns.is("created",e.created),e.ns.is("hovering",e.hovering)]),onMousemove:e.hoverItem,onClick:de(e.selectOptionClick,["stop"])},[ce(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[z("span",null,re(e.getLabel(e.item)),1)])],46,["aria-selected","onMousemove","onClick"])}var rn=St(on,[["render",sn],["__file","option-item.vue"]]),Zt=Number.isNaN||function(l){return typeof l=="number"&&l!==l};function un(e,l){return!!(e===l||Zt(e)&&Zt(l))}function cn(e,l){if(e.length!==l.length)return!1;for(var a=0;a<e.length;a++)if(!un(e[a],l[a]))return!1;return!0}function dn(e,l){l===void 0&&(l=cn);var a=null;function o(){for(var u=[],r=0;r<arguments.length;r++)u[r]=arguments[r];if(a&&a.lastThis===this&&l(u,a.lastArgs))return a.lastResult;var c=e.apply(this,u);return a={lastResult:c,lastArgs:u,lastThis:this},c}return o.clear=function(){a=null},o}const fn=()=>{const l=ll().proxy.$props;return y(()=>{const a=(o,u,r)=>({});return l.perfMode?aa(a):dn(a)})},vn=50,Yt="itemRendered",Xt="scroll",cl="forward",dl="backward",We="auto",fl="smart",vl="start",tt="center",ml="end",Re="horizontal",Vt="vertical",mn="ltr",Je="rtl",mt="negative",pl="positive-ascending",hl="positive-descending",pn={[Re]:"left",[Vt]:"top"},hn=20,gn={[Re]:"deltaX",[Vt]:"deltaY"},bn=({atEndEdge:e,atStartEdge:l,layout:a},o)=>{let u,r=0;const c=h=>h<0&&l.value||h>0&&e.value;return{hasReachedEdge:c,onWheel:h=>{il(u);const g=h[gn[a.value]];c(r)&&c(r+g)||(r+=g,ya()||h.preventDefault(),u=rl(()=>{o(r),r=0}))}}},pt=Ie({type:se([Number,Function]),required:!0}),ht=Ie({type:Number}),gt=Ie({type:Number,default:2}),yn=Ie({type:String,values:["ltr","rtl"],default:"ltr"}),bt=Ie({type:Number,default:0}),lt=Ie({type:Number,required:!0}),gl=Ie({type:String,values:["horizontal","vertical"],default:Vt}),bl=ze({className:{type:String,default:""},containerElement:{type:se([String,Object]),default:"div"},data:{type:se(Array),default:()=>na([])},direction:yn,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:se([Object,String,Array])},useIsScrolling:Boolean,width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:Boolean}),Sn=ze({cache:gt,estimatedItemSize:ht,layout:gl,initScrollOffset:bt,total:lt,itemSize:pt,...bl}),yt={type:Number,default:6},yl={type:Number,default:0},Sl={type:Number,default:2};ze({columnCache:gt,columnWidth:pt,estimatedColumnWidth:ht,estimatedRowHeight:ht,initScrollLeft:bt,initScrollTop:bt,itemKey:{type:se(Function),default:({columnIndex:e,rowIndex:l})=>`${l}:${e}`},rowCache:gt,rowHeight:pt,totalColumn:lt,totalRow:lt,hScrollbarSize:yt,vScrollbarSize:yt,scrollbarStartGap:yl,scrollbarEndGap:Sl,role:String,...bl});const wn=ze({alwaysOn:Boolean,class:String,layout:gl,total:lt,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:yt,startGap:yl,endGap:Sl,visible:Boolean}),ft=(e,l)=>e<l?cl:dl,Ke=e=>e===mn||e===Je||e===Re;let Me=null;function Jt(e=!1){if(Me===null||e){const l=document.createElement("div"),a=l.style;a.width="50px",a.height="50px",a.overflow="scroll",a.direction="rtl";const o=document.createElement("div"),u=o.style;return u.width="100px",u.height="100px",l.appendChild(o),document.body.appendChild(l),l.scrollLeft>0?Me=hl:(l.scrollLeft=1,l.scrollLeft===0?Me=mt:Me=pl),document.body.removeChild(l),Me}return Me}function On({move:e,size:l,bar:a},o){const u={},r=`translate${a.axis}(${e}px)`;return u[a.size]=l,u.transform=r,o==="horizontal"?u.height="100%":u.width="100%",u}const Vn=Le({name:"ElVirtualScrollBar",props:wn,emits:["scroll","start-move","stop-move"],setup(e,{emit:l}){const a=y(()=>e.startGap+e.endGap),o=ye("virtual-scrollbar"),u=ye("scrollbar"),r=I(),c=I();let b=null,h=null;const g=xe({isDragging:!1,traveled:0}),i=y(()=>Ra[e.layout]),d=y(()=>e.clientSize-C(a)),V=y(()=>({position:"absolute",width:`${Re===e.layout?d.value:e.scrollbarSize}px`,height:`${Re===e.layout?e.scrollbarSize:d.value}px`,[pn[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),M=y(()=>{const v=e.ratio;if(v>=100)return Number.POSITIVE_INFINITY;if(v>=50)return v*d.value/100;const F=d.value/3;return Math.floor(Math.min(Math.max(v*d.value,hn),F))}),N=y(()=>{if(!Number.isFinite(M.value))return{display:"none"};const v=`${M.value}px`;return On({bar:i.value,size:v,move:g.traveled},e.layout)}),n=y(()=>Math.ceil(e.clientSize-M.value-C(a))),Q=()=>{window.addEventListener("mousemove",O),window.addEventListener("mouseup",X);const v=C(c);v&&(h=document.onselectstart,document.onselectstart=()=>!1,v.addEventListener("touchmove",O,{passive:!0}),v.addEventListener("touchend",X))},H=()=>{window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",X),document.onselectstart=h,h=null;const v=C(c);v&&(v.removeEventListener("touchmove",O),v.removeEventListener("touchend",X))},_=v=>{v.stopImmediatePropagation(),!(v.ctrlKey||[1,2].includes(v.button))&&(g.isDragging=!0,g[i.value.axis]=v.currentTarget[i.value.offset]-(v[i.value.client]-v.currentTarget.getBoundingClientRect()[i.value.direction]),l("start-move"),Q())},X=()=>{g.isDragging=!1,g[i.value.axis]=0,l("stop-move"),H()},O=v=>{const{isDragging:F}=g;if(!F||!c.value||!r.value)return;const W=g[i.value.axis];if(!W)return;il(b);const Z=(r.value.getBoundingClientRect()[i.value.direction]-v[i.value.client])*-1,J=c.value[i.value.offset]-W,f=Z-J;b=rl(()=>{g.traveled=Math.max(0,Math.min(f,n.value)),l("scroll",f,n.value)})},m=v=>{const F=Math.abs(v.target.getBoundingClientRect()[i.value.direction]-v[i.value.client]),W=c.value[i.value.offset]/2,Z=F-W;g.traveled=Math.max(0,Math.min(Z,n.value)),l("scroll",Z,n.value)};return we(()=>e.scrollFrom,v=>{g.isDragging||(g.traveled=Math.ceil(v*n.value))}),ka(()=>{H()}),()=>Oe("div",{role:"presentation",ref:r,class:[o.b(),e.class,(e.alwaysOn||g.isDragging)&&"always-on"],style:V.value,onMousedown:de(m,["stop","prevent"]),onTouchstartPrevent:_},Oe("div",{ref:c,class:u.e("thumb"),style:N.value,onMousedown:_},[]))}}),wl=({name:e,getOffset:l,getItemSize:a,getItemOffset:o,getEstimatedTotalSize:u,getStartIndexForOffset:r,getStopIndexForStartIndex:c,initCache:b,clearCache:h,validateProps:g})=>Le({name:e??"ElVirtualList",props:Sn,emits:[Yt,Xt],setup(i,{emit:d,expose:V}){g(i);const M=ll(),N=ye("vl"),n=I(b(i,M)),Q=fn(),H=I(),_=I(),X=I(),O=I({isScrolling:!1,scrollDir:"forward",scrollOffset:Ve(i.initScrollOffset)?i.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:i.scrollbarAlwaysOn}),m=y(()=>{const{total:S,cache:L}=i,{isScrolling:R,scrollDir:q,scrollOffset:$}=C(O);if(S===0)return[0,0,0,0];const Y=r(i,$,C(n)),U=c(i,Y,$,C(n)),ge=!R||q===dl?Math.max(1,L):1,me=!R||q===cl?Math.max(1,L):1;return[Math.max(0,Y-ge),Math.max(0,Math.min(S-1,U+me)),Y,U]}),v=y(()=>u(i,C(n))),F=y(()=>Ke(i.layout)),W=y(()=>[{position:"relative",[`overflow-${F.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:i.direction,height:Ve(i.height)?`${i.height}px`:i.height,width:Ve(i.width)?`${i.width}px`:i.width},i.style]),Z=y(()=>{const S=C(v),L=C(F);return{height:L?"100%":`${S}px`,pointerEvents:C(O).isScrolling?"none":void 0,width:L?`${S}px`:"100%"}}),J=y(()=>F.value?i.width:i.height),{onWheel:f}=bn({atStartEdge:y(()=>O.value.scrollOffset<=0),atEndEdge:y(()=>O.value.scrollOffset>=v.value),layout:y(()=>i.layout)},S=>{var L,R;(R=(L=X.value).onMouseUp)==null||R.call(L),G(Math.min(O.value.scrollOffset+S,v.value-J.value))});oa(H,"wheel",f,{passive:!1});const T=()=>{const{total:S}=i;if(S>0){const[$,Y,U,ge]=C(m);d(Yt,$,Y,U,ge)}const{scrollDir:L,scrollOffset:R,updateRequested:q}=C(O);d(Xt,L,R,q)},K=S=>{const{clientHeight:L,scrollHeight:R,scrollTop:q}=S.currentTarget,$=C(O);if($.scrollOffset===q)return;const Y=Math.max(0,Math.min(q,R-L));O.value={...$,isScrolling:!0,scrollDir:ft($.scrollOffset,Y),scrollOffset:Y,updateRequested:!1},ie(ae)},x=S=>{const{clientWidth:L,scrollLeft:R,scrollWidth:q}=S.currentTarget,$=C(O);if($.scrollOffset===R)return;const{direction:Y}=i;let U=R;if(Y===Je)switch(Jt()){case mt:{U=-R;break}case hl:{U=q-L-R;break}}U=Math.max(0,Math.min(U,q-L)),O.value={...$,isScrolling:!0,scrollDir:ft($.scrollOffset,U),scrollOffset:U,updateRequested:!1},ie(ae)},B=S=>{C(F)?x(S):K(S),T()},te=(S,L)=>{const R=(v.value-J.value)/L*S;G(Math.min(v.value-J.value,R))},G=S=>{S=Math.max(S,0),S!==C(O).scrollOffset&&(O.value={...C(O),scrollOffset:S,scrollDir:ft(C(O).scrollOffset,S),updateRequested:!0},ie(ae))},le=(S,L=We)=>{const{scrollOffset:R}=C(O);S=Math.max(0,Math.min(S,i.total-1)),G(l(i,S,L,R,C(n)))},fe=S=>{const{direction:L,itemSize:R,layout:q}=i,$=Q.value(h&&R,h&&q,h&&L);let Y;if(Fa($,String(S)))Y=$[S];else{const U=o(i,S,C(n)),ge=a(i,S,C(n)),me=C(F),Ne=L===Je,ke=me?U:0;$[S]=Y={position:"absolute",left:Ne?void 0:`${ke}px`,right:Ne?`${ke}px`:void 0,top:me?0:`${U}px`,height:me?"100%":`${ge}px`,width:me?`${ge}px`:"100%"}}return Y},ae=()=>{O.value.isScrolling=!1,ie(()=>{Q.value(-1,null,null)})},E=()=>{const S=H.value;S&&(S.scrollTop=0)};wt(()=>{if(!sa)return;const{initScrollOffset:S}=i,L=C(H);Ve(S)&&L&&(C(F)?L.scrollLeft=S:L.scrollTop=S),T()}),$a(()=>{const{direction:S,layout:L}=i,{scrollOffset:R,updateRequested:q}=C(O),$=C(H);if(q&&$)if(L===Re)if(S===Je)switch(Jt()){case mt:{$.scrollLeft=-R;break}case pl:{$.scrollLeft=R;break}default:{const{clientWidth:Y,scrollWidth:U}=$;$.scrollLeft=U-Y-R;break}}else $.scrollLeft=R;else $.scrollTop=R}),Da(()=>{C(H).scrollTop=C(O).scrollOffset});const k={ns:N,clientSize:J,estimatedTotalSize:v,windowStyle:W,windowRef:H,innerRef:_,innerStyle:Z,itemsToRender:m,scrollbarRef:X,states:O,getItemStyle:fe,onScroll:B,onScrollbarScroll:te,onWheel:f,scrollTo:G,scrollToItem:le,resetScrollTop:E};return V({windowRef:H,innerRef:_,getItemStyleCache:Q,scrollTo:G,scrollToItem:le,resetScrollTop:E,states:O}),k},render(i){var d;const{$slots:V,className:M,clientSize:N,containerElement:n,data:Q,getItemStyle:H,innerElement:_,itemsToRender:X,innerStyle:O,layout:m,total:v,onScroll:F,onScrollbarScroll:W,states:Z,useIsScrolling:J,windowStyle:f,ns:T}=i,[K,x]=X,B=Pe(n),te=Pe(_),G=[];if(v>0)for(let E=K;E<=x;E++)G.push(Oe(_e,{key:E},(d=V.default)==null?void 0:d.call(V,{data:Q,index:E,isScrolling:J?Z.isScrolling:void 0,style:H(E)})));const le=[Oe(te,{style:O,ref:"innerRef"},Wt(te)?G:{default:()=>G})],fe=Oe(Vn,{ref:"scrollbarRef",clientSize:N,layout:m,onScroll:W,ratio:N*100/this.estimatedTotalSize,scrollFrom:Z.scrollOffset/(this.estimatedTotalSize-N),total:v,alwaysOn:Z.scrollbarAlwaysOn}),ae=Oe(B,{class:[T.e("window"),M],style:f,onScroll:F,ref:"windowRef",key:0},Wt(B)?[le]:{default:()=>[le]});return Oe("div",{key:0,class:[T.e("wrapper"),Z.scrollbarAlwaysOn?"always-on":""]},[ae,fe])}}),In=wl({name:"ElFixedSizeList",getItemOffset:({itemSize:e},l)=>l*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:l})=>l*e,getOffset:({height:e,total:l,itemSize:a,layout:o,width:u},r,c,b)=>{const h=Ke(o)?u:e,g=Math.max(0,l*a-h),i=Math.min(g,r*a),d=Math.max(0,(r+1)*a-h);switch(c===fl&&(b>=d-h&&b<=i+h?c=We:c=tt),c){case vl:return i;case ml:return d;case tt:{const V=Math.round(d+(i-d)/2);return V<Math.ceil(h/2)?0:V>g+Math.floor(h/2)?g:V}case We:default:return b>=d&&b<=i?b:b<d?d:i}},getStartIndexForOffset:({total:e,itemSize:l},a)=>Math.max(0,Math.min(e-1,Math.floor(a/l))),getStopIndexForStartIndex:({height:e,total:l,itemSize:a,layout:o,width:u},r,c)=>{const b=r*a,h=Ke(o)?u:e,g=Math.ceil((h+c-b)/a);return Math.max(0,Math.min(l-1,r+g-1))},initCache(){},clearCache:!0,validateProps(){}}),Ce=(e,l,a)=>{const{itemSize:o}=e,{items:u,lastVisitedIndex:r}=a;if(l>r){let c=0;if(r>=0){const b=u[r];c=b.offset+b.size}for(let b=r+1;b<=l;b++){const h=o(b);u[b]={offset:c,size:h},c+=h}a.lastVisitedIndex=l}return u[l]},En=(e,l,a)=>{const{items:o,lastVisitedIndex:u}=l;return(u>0?o[u].offset:0)>=a?Ol(e,l,0,u,a):Tn(e,l,Math.max(0,u),a)},Ol=(e,l,a,o,u)=>{for(;a<=o;){const r=a+Math.floor((o-a)/2),c=Ce(e,r,l).offset;if(c===u)return r;c<u?a=r+1:c>u&&(o=r-1)}return Math.max(0,a-1)},Tn=(e,l,a,o)=>{const{total:u}=e;let r=1;for(;a<u&&Ce(e,a,l).offset<o;)a+=r,r*=2;return Ol(e,l,Math.floor(a/2),Math.min(a,u-1),o)},xt=({total:e},{items:l,estimatedItemSize:a,lastVisitedIndex:o})=>{let u=0;if(o>=e&&(o=e-1),o>=0){const b=l[o];u=b.offset+b.size}const c=(e-o-1)*a;return u+c},Mn=wl({name:"ElDynamicSizeList",getItemOffset:(e,l,a)=>Ce(e,l,a).offset,getItemSize:(e,l,{items:a})=>a[l].size,getEstimatedTotalSize:xt,getOffset:(e,l,a,o,u)=>{const{height:r,layout:c,width:b}=e,h=Ke(c)?b:r,g=Ce(e,l,u),i=xt(e,u),d=Math.max(0,Math.min(i-h,g.offset)),V=Math.max(0,g.offset-h+g.size);switch(a===fl&&(o>=V-h&&o<=d+h?a=We:a=tt),a){case vl:return d;case ml:return V;case tt:return Math.round(V+(d-V)/2);case We:default:return o>=V&&o<=d?o:o<V?V:d}},getStartIndexForOffset:(e,l,a)=>En(e,a,l),getStopIndexForStartIndex:(e,l,a,o)=>{const{height:u,total:r,layout:c,width:b}=e,h=Ke(c)?b:u,g=Ce(e,l,o),i=a+h;let d=g.offset+g.size,V=l;for(;V<r-1&&d<i;)V++,d+=Ce(e,V,o).size;return V},initCache({estimatedItemSize:e=vn},l){const a={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return a.clearCacheAfterIndex=(o,u=!0)=>{var r,c;a.lastVisitedIndex=Math.min(a.lastVisitedIndex,o-1),(r=l.exposed)==null||r.getItemStyleCache(-1),u&&((c=l.proxy)==null||c.$forceUpdate())},a},clearCache:!1,validateProps:({itemSize:e})=>{}}),Cn={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var Rn=Le({name:"ElSelectDropdown",props:Cn,setup(e,{slots:l,expose:a}){const o=tl(Ot),u=ye("select"),{getLabel:r,getValue:c,getDisabled:b}=at(o.props),h=I([]),g=I(),i=y(()=>e.data.length);we(()=>i.value,()=>{var f,T;(T=(f=o.tooltipRef.value)==null?void 0:f.updatePopper)==null||T.call(f)});const d=y(()=>_t(o.props.estimatedOptionHeight)),V=y(()=>d.value?{itemSize:o.props.itemHeight}:{estimatedSize:o.props.estimatedOptionHeight,itemSize:f=>h.value[f]}),M=(f=[],T)=>{const{props:{valueKey:K}}=o;return He(T)?f&&f.some(x=>al(ue(x,K))===ue(T,K)):f.includes(T)},N=(f,T)=>{if(He(T)){const{valueKey:K}=o.props;return ue(f,K)===ue(T,K)}else return f===T},n=(f,T)=>o.props.multiple?M(f,c(T)):N(f,c(T)),Q=(f,T)=>{const{disabled:K,multiple:x,multipleLimit:B}=o.props;return K||!T&&(x?B>0&&f.length>=B:!1)},H=f=>e.hoveringIndex===f;a({listRef:g,isSized:d,isItemDisabled:Q,isItemHovering:H,isItemSelected:n,scrollToItem:f=>{const T=g.value;T&&T.scrollToItem(f)},resetScrollTop:()=>{const f=g.value;f&&f.resetScrollTop()}});const m=f=>{const{index:T,data:K,style:x}=f,B=C(d),{itemSize:te,estimatedSize:G}=C(V),{modelValue:le}=o.props,{onSelect:fe,onHover:ae}=o,E=K[T];if(E.type==="Group")return P(_a,{item:E,style:x,height:B?te:G},null);const k=n(le,E),S=Q(le,k),L=H(T);return P(rn,Kt(f,{selected:k,disabled:b(E)||S,created:!!E.created,hovering:L,item:E,onSelect:fe,onHover:ae}),{default:R=>{var q;return((q=l.default)==null?void 0:q.call(l,R))||P("span",null,[r(E)])}})},{onKeyboardNavigate:v,onKeyboardSelect:F}=o,W=()=>{v("forward")},Z=()=>{v("backward")},J=f=>{const{code:T}=f,{tab:K,esc:x,down:B,up:te,enter:G,numpadEnter:le}=el;switch([x,B,te,G,le].includes(T)&&(f.preventDefault(),f.stopPropagation()),T){case K:case x:break;case B:W();break;case te:Z();break;case G:case le:F();break}};return()=>{var f,T,K,x;const{data:B,width:te}=e,{height:G,multiple:le,scrollbarAlwaysOn:fe}=o.props,ae=y(()=>ia?!0:fe),E=C(d)?In:Mn;return P("div",{class:[u.b("dropdown"),u.is("multiple",le)],style:{width:`${te}px`}},[(f=l.header)==null?void 0:f.call(l),((T=l.loading)==null?void 0:T.call(l))||((K=l.empty)==null?void 0:K.call(l))||P(E,Kt({ref:g},C(V),{className:u.be("dropdown","list"),scrollbarAlwaysOn:ae.value,data:B,height:G,width:te,total:B.length,onKeydown:J}),{default:k=>P(m,k,null)}),(x=l.footer)==null?void 0:x.call(l)])}}});function zn(e,l){const{aliasProps:a,getLabel:o,getValue:u}=at(e),r=I(0),c=I(),b=y(()=>e.allowCreate&&e.filterable);function h(M){const N=n=>o(n)===M;return e.options&&e.options.some(N)||l.createdOptions.some(N)}function g(M){b.value&&(e.multiple&&M.created?r.value++:c.value=M)}function i(M){if(b.value)if(M&&M.length>0){if(h(M))return;const N={[a.value.value]:M,[a.value.label]:M,created:!0,[a.value.disabled]:!1};l.createdOptions.length>=r.value?l.createdOptions[r.value]=N:l.createdOptions.push(N)}else if(e.multiple)l.createdOptions.length=r.value;else{const N=c.value;l.createdOptions.length=0,N&&N.created&&l.createdOptions.push(N)}}function d(M){if(!b.value||!M||!M.created||M.created&&e.reserveKeyword&&l.inputValue===o(M))return;const N=l.createdOptions.findIndex(n=>u(n)===u(M));~N&&(l.createdOptions.splice(N,1),r.value--)}function V(){b.value&&(l.createdOptions.length=0,r.value=0)}return{createNewOption:i,removeNewOption:d,selectNewOption:g,clearAllNewOption:V}}const Ln=(e,l)=>{const{t:a}=ra(),o=ye("select"),u=ye("input"),{form:r,formItem:c}=ua(),{inputId:b}=ca(e,{formItemContext:c}),{aliasProps:h,getLabel:g,getValue:i,getDisabled:d,getOptions:V}=at(e),{valueOnClear:M,isEmptyValue:N}=da(e),n=xe({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),Q=I(-1),H=I(),_=I(),X=I(),O=I(),m=I(),v=I(),F=I(),W=I(),Z=I(),J=I(),{isComposing:f,handleCompositionStart:T,handleCompositionEnd:K,handleCompositionUpdate:x}=Sa({afterComposition:t=>Ft(t)}),B=y(()=>e.disabled||!!r?.disabled),{wrapperRef:te,isFocused:G,handleBlur:le}=wa(m,{disabled:B,afterFocus(){e.automaticDropdown&&!k.value&&(k.value=!0,n.menuVisibleOnFocus=!0)},beforeBlur(t){var s,p;return((s=X.value)==null?void 0:s.isFocusInsideContent(t))||((p=O.value)==null?void 0:p.isFocusInsideContent(t))},afterBlur(){var t;k.value=!1,n.menuVisibleOnFocus=!1,e.validateEvent&&((t=c?.validate)==null||t.call(c,"blur").catch(s=>Qt()))}}),fe=y(()=>ke("")),ae=y(()=>e.loading?!1:e.options.length>0||n.createdOptions.length>0),E=I([]),k=I(!1),S=y(()=>{var t;return(t=r?.statusIcon)!=null?t:!1}),L=y(()=>{const t=E.value.length*e.itemHeight;return t>e.height?e.height:t}),R=y(()=>e.multiple?Se(e.modelValue)&&e.modelValue.length>0:!N(e.modelValue)),q=y(()=>e.clearable&&!B.value&&n.inputHovering&&R.value),$=y(()=>e.remote&&e.filterable?"":e.suffixIcon),Y=y(()=>$.value&&o.is("reverse",k.value)),U=y(()=>c?.validateState||""),ge=y(()=>{if(U.value)return fa[U.value]}),me=y(()=>e.remote?300:0),Ne=y(()=>e.loading?e.loadingText||a("el.select.loading"):e.remote&&!n.inputValue&&!ae.value?!1:e.filterable&&n.inputValue&&ae.value&&E.value.length===0?e.noMatchText||a("el.select.noMatch"):ae.value?null:e.noDataText||a("el.select.noData")),ke=t=>{const s=new RegExp(Oa(t),"i"),{filterMethod:p,remoteMethod:w}=al(e),ee=e.filterable&&Qe(p),pe=e.filterable&&e.remote&&Qe(w),Fe=ve=>ee||pe?!0:t?s.test(g(ve)||""):!0;return e.loading?[]:[...n.createdOptions,...e.options].reduce((ve,Ee)=>{const dt=V(Ee);if(Se(dt)){const qe=dt.filter(Fe);qe.length>0&&ve.push({label:g(Ee),type:"Group"},...qe)}else(e.remote||Fe(Ee))&&ve.push(Ee);return ve},[])},It=()=>{E.value=ke(n.inputValue)},Et=y(()=>{const t=new Map;return fe.value.forEach((s,p)=>{t.set(ne(i(s)),{option:s,index:p})}),t}),Ue=y(()=>{const t=new Map;return E.value.forEach((s,p)=>{t.set(ne(i(s)),{option:s,index:p})}),t}),Vl=y(()=>E.value.every(t=>d(t))),Tt=va(),Il=y(()=>Tt.value==="small"?"small":"default"),$e=()=>{var t;if(Ve(e.fitInputWidth)){Q.value=e.fitInputWidth;return}const s=((t=H.value)==null?void 0:t.offsetWidth)||200;!e.fitInputWidth&&ae.value?ie(()=>{Q.value=Math.max(s,El())}):Q.value=s},El=()=>{var t,s;const w=document.createElement("canvas").getContext("2d"),ee=o.be("dropdown","item"),Fe=(((s=(t=W.value)==null?void 0:t.listRef)==null?void 0:s.innerRef)||document).querySelector(`.${ee}`);if(Fe===null||w===null)return 0;const ve=getComputedStyle(Fe),Ee=Number.parseFloat(ve.paddingLeft)+Number.parseFloat(ve.paddingRight);return w.font=`bold ${ve.font.replace(new RegExp(`\\b${ve.fontWeight}\\b`),"")}`,E.value.reduce((qe,Xl)=>{const Jl=w.measureText(g(Xl));return Math.max(Jl.width,qe)},0)+Ee},Tl=()=>{if(!_.value)return 0;const t=window.getComputedStyle(_.value);return Number.parseFloat(t.gap||"6px")},Ml=y(()=>{const t=Tl();return{maxWidth:`${J.value&&e.maxCollapseTags===1?n.selectionWidth-n.collapseItemWidth-t:n.selectionWidth}px`}}),Cl=y(()=>({maxWidth:`${n.selectionWidth}px`})),Rl=y(()=>Se(e.modelValue)?e.modelValue.length===0&&!n.inputValue:e.filterable?!n.inputValue:!0),zl=y(()=>{var t;const s=(t=e.placeholder)!=null?t:a("el.select.placeholder");return e.multiple||!R.value?s:n.selectedLabel}),Ll=y(()=>{var t,s;return(s=(t=X.value)==null?void 0:t.popperRef)==null?void 0:s.contentRef}),Nl=y(()=>{if(e.multiple){const t=e.modelValue.length;if(e.modelValue.length>0&&Ue.value.has(e.modelValue[t-1])){const{index:s}=Ue.value.get(e.modelValue[t-1]);return s}}else if(!N(e.modelValue)&&Ue.value.has(e.modelValue)){const{index:t}=Ue.value.get(e.modelValue);return t}return-1}),kl=y({get(){return k.value&&Ne.value!==!1},set(t){k.value=t}}),$l=y(()=>e.multiple?e.collapseTags?n.cachedOptions.slice(0,e.maxCollapseTags):n.cachedOptions:[]),Dl=y(()=>e.multiple?e.collapseTags?n.cachedOptions.slice(e.maxCollapseTags):[]:[]),{createNewOption:Mt,removeNewOption:nt,selectNewOption:Ct,clearAllNewOption:ot}=zn(e,n),st=()=>{B.value||(n.menuVisibleOnFocus?n.menuVisibleOnFocus=!1:k.value=!k.value)},Rt=()=>{n.inputValue.length>0&&!k.value&&(k.value=!0),Mt(n.inputValue),ie(()=>{it(n.inputValue)})},zt=za(Rt,me.value),it=t=>{n.previousQuery===t||f.value||(n.previousQuery=t,e.filterable&&Qe(e.filterMethod)?e.filterMethod(t):e.filterable&&e.remote&&Qe(e.remoteMethod)&&e.remoteMethod(t),e.defaultFirstOption&&(e.filterable||e.remote)&&E.value.length?ie(Fl):ie(Ql))},Fl=()=>{const t=E.value.filter(w=>!w.disabled&&w.type!=="Group"),s=t.find(w=>w.created),p=t[0];n.hoveringIndex=rt(E.value,s||p)},Bl=t=>{Ye(e.modelValue,t)||l(ol,t)},De=t=>{l(sl,t),Bl(t),n.previousValue=e.multiple?String(t):t,ie(()=>{if(e.multiple&&Se(e.modelValue)){const s=n.cachedOptions.slice(),p=e.modelValue.map(w=>Bt(w,s));Ye(n.cachedOptions,p)||(n.cachedOptions=p)}else Ge(!0)})},rt=(t=[],s)=>{if(!He(s))return t.indexOf(s);const p=e.valueKey;let w=-1;return t.some((ee,pe)=>ue(ee,p)===ue(s,p)?(w=pe,!0):!1),w},ne=t=>He(t)?ue(t,e.valueKey):t,Lt=()=>{$e()},Nt=()=>{n.selectionWidth=Number.parseFloat(window.getComputedStyle(_.value).width)},Al=()=>{n.collapseItemWidth=J.value.getBoundingClientRect().width},ut=()=>{var t,s;(s=(t=X.value)==null?void 0:t.updatePopper)==null||s.call(t)},kt=()=>{var t,s;(s=(t=O.value)==null?void 0:t.updatePopper)==null||s.call(t)},$t=t=>{if(e.multiple){let s=e.modelValue.slice();const p=rt(s,i(t));p>-1?(s=[...s.slice(0,p),...s.slice(p+1)],n.cachedOptions.splice(p,1),nt(t)):(e.multipleLimit<=0||s.length<e.multipleLimit)&&(s=[...s,i(t)],n.cachedOptions.push(t),Ct(t)),De(s),t.created&&it(""),e.filterable&&!e.reserveKeyword&&(n.inputValue="")}else n.selectedLabel=g(t),De(i(t)),k.value=!1,Ct(t),t.created||ot();je()},Pl=(t,s)=>{let p=e.modelValue.slice();const w=rt(p,i(s));w>-1&&!B.value&&(p=[...e.modelValue.slice(0,w),...e.modelValue.slice(w+1)],n.cachedOptions.splice(w,1),De(p),l("remove-tag",i(s)),nt(s)),t.stopPropagation(),je()},je=()=>{var t;(t=m.value)==null||t.focus()},Hl=()=>{var t;if(k.value){k.value=!1,ie(()=>{var s;return(s=m.value)==null?void 0:s.blur()});return}(t=m.value)==null||t.blur()},Wl=()=>{n.inputValue.length>0?n.inputValue="":k.value=!1},Kl=t=>Va(t,s=>!n.cachedOptions.some(p=>i(p)===s&&d(p))),Ul=t=>{if(e.multiple&&t.code!==el.delete&&n.inputValue.length===0){t.preventDefault();const s=e.modelValue.slice(),p=Kl(s);if(p<0)return;const w=s[p];s.splice(p,1);const ee=n.cachedOptions[p];n.cachedOptions.splice(p,1),nt(ee),De(s),l("remove-tag",w)}},jl=()=>{let t;Se(e.modelValue)?t=[]:t=M.value,n.selectedLabel="",k.value=!1,De(t),l("clear"),ot(),je()},Dt=(t,s=void 0)=>{const p=E.value;if(!["forward","backward"].includes(t)||B.value||p.length<=0||Vl.value||f.value)return;if(!k.value)return st();_t(s)&&(s=n.hoveringIndex);let w=-1;t==="forward"?(w=s+1,w>=p.length&&(w=0)):t==="backward"&&(w=s-1,(w<0||w>=p.length)&&(w=p.length-1));const ee=p[w];if(d(ee)||ee.type==="Group")return Dt(t,w);n.hoveringIndex=w,ct(w)},Gl=()=>{if(k.value)~n.hoveringIndex&&E.value[n.hoveringIndex]&&$t(E.value[n.hoveringIndex]);else return st()},ql=t=>{n.hoveringIndex=t??-1},Ql=()=>{e.multiple?n.hoveringIndex=E.value.findIndex(t=>e.modelValue.some(s=>ne(s)===ne(i(t)))):n.hoveringIndex=E.value.findIndex(t=>ne(i(t))===ne(e.modelValue))},Ft=t=>{if(n.inputValue=t.target.value,e.remote)zt();else return Rt()},Zl=t=>{if(k.value=!1,G.value){const s=new FocusEvent("focus",t);le(s)}},Yl=()=>(n.isBeforeHide=!1,ie(()=>{~Nl.value&&ct(n.hoveringIndex)})),ct=t=>{W.value.scrollToItem(t)},Bt=(t,s)=>{const p=ne(t);if(Et.value.has(p)){const{option:w}=Et.value.get(p);return w}if(s&&s.length){const w=s.find(ee=>ne(i(ee))===p);if(w)return w}return{[h.value.value]:t,[h.value.label]:t}},Ge=(t=!1)=>{if(e.multiple)if(e.modelValue.length>0){const s=n.cachedOptions.slice();n.cachedOptions.length=0,n.previousValue=e.modelValue.toString();for(const p of e.modelValue){const w=Bt(p,s);n.cachedOptions.push(w)}}else n.cachedOptions=[],n.previousValue=void 0;else if(R.value){n.previousValue=e.modelValue;const s=E.value,p=s.findIndex(w=>ne(i(w))===ne(e.modelValue));~p?n.selectedLabel=g(s[p]):(!n.selectedLabel||t)&&(n.selectedLabel=ne(e.modelValue))}else n.selectedLabel="",n.previousValue=void 0;ot(),$e()};return we(()=>e.fitInputWidth,()=>{$e()}),we(k,t=>{t?(e.persistent||$e(),it("")):(n.inputValue="",n.previousQuery=null,n.isBeforeHide=!0,Mt("")),l("visible-change",t)}),we(()=>e.modelValue,(t,s)=>{var p;(!t||Se(t)&&t.length===0||e.multiple&&!Ye(t.toString(),n.previousValue)||!e.multiple&&ne(t)!==ne(n.previousValue))&&Ge(!0),!Ye(t,s)&&e.validateEvent&&((p=c?.validate)==null||p.call(c,"change").catch(ee=>Qt()))},{deep:!0}),we(()=>e.options,()=>{const t=m.value;(!t||t&&document.activeElement!==t)&&Ge()},{deep:!0,flush:"post"}),we(()=>E.value,()=>($e(),W.value&&ie(W.value.resetScrollTop))),Ut(()=>{n.isBeforeHide||It()}),Ut(()=>{const{valueKey:t,options:s}=e,p=new Map;for(const w of s){const ee=i(w);let pe=ee;if(He(pe)&&(pe=ue(ee,t)),p.get(pe))break;p.set(pe,!0)}}),wt(()=>{Ge()}),Te(H,Lt),Te(_,Nt),Te(W,ut),Te(te,ut),Te(Z,kt),Te(J,Al),{inputId:b,collapseTagSize:Il,currentPlaceholder:zl,expanded:k,emptyText:Ne,popupHeight:L,debounce:me,allOptions:fe,filteredOptions:E,iconComponent:$,iconReverse:Y,tagStyle:Ml,collapseTagStyle:Cl,popperSize:Q,dropdownMenuVisible:kl,hasModelValue:R,shouldShowPlaceholder:Rl,selectDisabled:B,selectSize:Tt,needStatusIcon:S,showClearBtn:q,states:n,isFocused:G,nsSelect:o,nsInput:u,inputRef:m,menuRef:W,tagMenuRef:Z,tooltipRef:X,tagTooltipRef:O,selectRef:H,wrapperRef:te,selectionRef:_,prefixRef:v,suffixRef:F,collapseItemRef:J,popperRef:Ll,validateState:U,validateIcon:ge,showTagList:$l,collapseTagList:Dl,debouncedOnInputChange:zt,deleteTag:Pl,getLabel:g,getValue:i,getDisabled:d,getValueKey:ne,handleClear:jl,handleClickOutside:Zl,handleDel:Ul,handleEsc:Wl,focus:je,blur:Hl,handleMenuEnter:Yl,handleResize:Lt,resetSelectionWidth:Nt,updateTooltip:ut,updateTagTooltip:kt,updateOptions:It,toggleMenu:st,scrollTo:ct,onInput:Ft,onKeyboardNavigate:Dt,onKeyboardSelect:Gl,onSelect:$t,onHover:ql,handleCompositionStart:T,handleCompositionEnd:K,handleCompositionUpdate:x}},Nn=Le({name:"ElSelectV2",components:{ElSelectMenu:Rn,ElTag:Ia,ElTooltip:Na,ElIcon:ma},directives:{ClickOutside:La},props:tn,emits:an,setup(e,{emit:l}){const a=y(()=>{const{modelValue:b,multiple:h}=e,g=h?[]:void 0;return Se(b)?h?b:g:h?g:b}),o=Ln(xe({...jt(e),modelValue:a}),l),{calculatorRef:u,inputStyle:r}=Ea();Ka(Ot,{props:xe({...jt(e),height:o.popupHeight,modelValue:a}),expanded:o.expanded,tooltipRef:o.tooltipRef,onSelect:o.onSelect,onHover:o.onHover,onKeyboardNavigate:o.onKeyboardNavigate,onKeyboardSelect:o.onKeyboardSelect});const c=y(()=>e.multiple?o.states.cachedOptions.map(b=>b.label):o.states.selectedLabel);return{...o,modelValue:a,selectedLabel:c,calculatorRef:u,inputStyle:r}}});function kn(e,l,a,o,u,r){const c=Ze("el-tag"),b=Ze("el-tooltip"),h=Ze("el-icon"),g=Ze("el-select-menu"),i=Ba("click-outside");return Xe((A(),oe("div",{ref:"selectRef",class:D([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),onMouseenter:d=>e.states.inputHovering=!0,onMouseleave:d=>e.states.inputHovering=!1},[P(b,{ref:"tooltipRef",visible:e.dropdownMenuVisible,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,placement:e.placement,pure:"",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:d=>e.states.isBeforeHide=!1},{default:j(()=>[z("div",{ref:"wrapperRef",class:D([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:de(e.toggleMenu,["prevent"])},[e.$slots.prefix?(A(),oe("div",{key:0,ref:"prefixRef",class:D(e.nsSelect.e("prefix"))},[ce(e.$slots,"prefix")],2)):he("v-if",!0),z("div",{ref:"selectionRef",class:D([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.modelValue.length)])},[e.multiple?ce(e.$slots,"tag",{key:0,data:e.states.cachedOptions,deleteTag:e.deleteTag,selectDisabled:e.selectDisabled},()=>[(A(!0),oe(_e,null,vt(e.showTagList,d=>(A(),oe("div",{key:e.getValueKey(e.getValue(d)),class:D(e.nsSelect.e("selected-item"))},[P(c,{closable:!e.selectDisabled&&!e.getDisabled(d),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Ae(e.tagStyle),onClose:V=>e.deleteTag(V,d)},{default:j(()=>[z("span",{class:D(e.nsSelect.e("tags-text"))},[ce(e.$slots,"label",{label:e.getLabel(d),value:e.getValue(d)},()=>[et(re(e.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.modelValue.length>e.maxCollapseTags?(A(),be(b,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom","popper-class":e.popperClass,teleported:e.teleported},{default:j(()=>[z("div",{ref:"collapseItemRef",class:D(e.nsSelect.e("selected-item"))},[P(c,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,style:Ae(e.collapseTagStyle),"disable-transitions":""},{default:j(()=>[z("span",{class:D(e.nsSelect.e("tags-text"))}," + "+re(e.modelValue.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:j(()=>[z("div",{ref:"tagMenuRef",class:D(e.nsSelect.e("selection"))},[(A(!0),oe(_e,null,vt(e.collapseTagList,d=>(A(),oe("div",{key:e.getValueKey(e.getValue(d)),class:D(e.nsSelect.e("selected-item"))},[P(c,{class:"in-tooltip",closable:!e.selectDisabled&&!e.getDisabled(d),size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:V=>e.deleteTag(V,d)},{default:j(()=>[z("span",{class:D(e.nsSelect.e("tags-text"))},[ce(e.$slots,"label",{label:e.getLabel(d),value:e.getValue(d)},()=>[et(re(e.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","popper-class","teleported"])):he("v-if",!0)]):he("v-if",!0),z("div",{class:D([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[Xe(z("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":d=>e.states.inputValue=d,style:Ae(e.inputStyle),autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-label":e.ariaLabel,class:D([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,onInput:e.onInput,onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onKeydown:[Be(de(d=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),Be(de(d=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),Be(de(e.onKeyboardSelect,["stop","prevent"]),["enter"]),Be(de(e.handleEsc,["stop","prevent"]),["esc"]),Be(de(e.handleDel,["stop"]),["delete"])],onClick:de(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[nl,e.states.inputValue]]),e.filterable?(A(),oe("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:D(e.nsSelect.e("input-calculator")),textContent:re(e.states.inputValue)},null,10,["textContent"])):he("v-if",!0)],2),e.shouldShowPlaceholder?(A(),oe("div",{key:1,class:D([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?ce(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[z("span",null,re(e.currentPlaceholder),1)]):(A(),oe("span",{key:1},re(e.currentPlaceholder),1))],2)):he("v-if",!0)],2),z("div",{ref:"suffixRef",class:D(e.nsSelect.e("suffix"))},[e.iconComponent?Xe((A(),be(h,{key:0,class:D([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.iconReverse])},{default:j(()=>[(A(),be(Pe(e.iconComponent)))]),_:1},8,["class"])),[[Wa,!e.showClearBtn]]):he("v-if",!0),e.showClearBtn&&e.clearIcon?(A(),be(h,{key:1,class:D([e.nsSelect.e("caret"),e.nsInput.e("icon"),e.nsSelect.e("clear")]),onClick:de(e.handleClear,["prevent","stop"])},{default:j(()=>[(A(),be(Pe(e.clearIcon)))]),_:1},8,["class","onClick"])):he("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(A(),be(h,{key:2,class:D([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading",e.validateState==="validating")])},{default:j(()=>[(A(),be(Pe(e.validateIcon)))]),_:1},8,["class"])):he("v-if",!0)],2)],10,["onClick"])]),content:j(()=>[P(g,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},Aa({default:j(d=>[ce(e.$slots,"default",Pa(Ha(d)))]),_:2},[e.$slots.header?{name:"header",fn:j(()=>[z("div",{class:D(e.nsSelect.be("dropdown","header"))},[ce(e.$slots,"header")],2)])}:void 0,e.$slots.loading&&e.loading?{name:"loading",fn:j(()=>[z("div",{class:D(e.nsSelect.be("dropdown","loading"))},[ce(e.$slots,"loading")],2)])}:e.loading||e.filteredOptions.length===0?{name:"empty",fn:j(()=>[z("div",{class:D(e.nsSelect.be("dropdown","empty"))},[ce(e.$slots,"empty",{},()=>[z("span",null,re(e.emptyText),1)])],2)])}:void 0,e.$slots.footer?{name:"footer",fn:j(()=>[z("div",{class:D(e.nsSelect.be("dropdown","footer"))},[ce(e.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[i,e.handleClickOutside,e.popperRef]])}var $n=St(Nn,[["render",kn],["__file","select.vue"]]);const Dn=pa($n),Fn={class:"email-sender"},Bn={class:"form-group",style:{display:"flex","flex-direction":"row","flex-wrap":"wrap"}},An={class:"form-group"},Pn={class:"form-group"},Hn={for:"content"},Wn={class:"form-group"},Kn={class:"form-group",style:{display:"flex","flex-direction":"row"}},Un=["disabled"],jn={__name:"Email",setup(e){Ua(),Gt.setOptions({breaks:!0,gfm:!0});const l=I({receiver:"",subject:"",content:"",store_upload_files:!1}),a=I(!1),o=I(null),u=I([]),r=I([]),c=I([{label:"普通用户",value:"isyourday"},{label:"管理员",value:"user"}]),b=I("isyourday"),h=I([]),g=I([]),i=I([]),d=I("private"),V=I(""),M=I(!0),N=(O,m)=>{r.value=m},n=async(O="isyourday")=>{if(O==="isyourday"){const m=await Ga();u.value=m.data.items.map(v=>({label:v.real_name,value:v.id}))}else{const m=await qa();u.value=m.data.items.map(v=>({label:v.username,value:v.id}))}},Q=async()=>{const O=await Za(d.value);g.value=O.data.items.map(m=>({label:m.name,value:m.id}))},H=async()=>{if(!h.value.length||!l.value.subject){_("请填写所有必填字段","error");return}if(a.value=!0,o.value=null,l.value.receiver=h.value.join(","),M.value){const v=qt.sanitize(Gt(V.value));l.value.content=v}else l.value.content=qt.sanitize(V.value);l.value.send_directly=!0;const O=new FormData;if(Object.entries(l.value).forEach(([v,F])=>{O.append(v,F)}),r.value.length>0&&r.value.forEach(v=>{O.append("files",v.raw)}),i.value.length>0){const v=i.value.join(",");O.append("files_in_store",v)}(await ja(b.value,O)).status===200&&ha.success("邮件发送成功！"),X(),a.value=!1},_=(O,m)=>{o.value={text:O,type:m}},X=()=>{l.value={receiver:"",subject:"",content:"",store_upload_files:!1},V.value="",h.value=[],i.value=[]};return wt(()=>{n(),Q()}),(O,m)=>{const v=Ma,F=Ta,W=Dn,Z=ba,J=ga;return A(),oe("div",Fn,[m[15]||(m[15]=z("div",{class:"header"},[z("h2",null,"发送邮件")],-1)),z("form",{onSubmit:de(H,["prevent"]),class:"email-form"},[z("div",Bn,[m[9]||(m[9]=z("label",{for:"recipient",style:{width:"100%"}},"收件人:",-1)),P(F,{size:"large",onChange:m[0]||(m[0]=f=>n(b.value)),modelValue:b.value,"onUpdate:modelValue":m[1]||(m[1]=f=>b.value=f),placeholder:"Select",style:{width:"110px"}},{default:j(()=>[(A(!0),oe(_e,null,vt(c.value,f=>(A(),be(v,{key:f.value,label:f.label,value:f.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),P(W,{modelValue:h.value,"onUpdate:modelValue":m[2]||(m[2]=f=>h.value=f),options:u.value,size:"large",placeholder:"请选择收件人",style:{flex:"1"},multiple:"",filterable:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,"reserve-keyword":!1},null,8,["modelValue","options"])]),z("div",An,[m[10]||(m[10]=z("label",{for:"subject"},"主题:",-1)),Xe(z("input",{type:"text",id:"subject","onUpdate:modelValue":m[3]||(m[3]=f=>l.value.subject=f),required:"",placeholder:"邮件主题"},null,512),[[nl,l.value.subject]])]),z("div",Pn,[z("label",Hn,[m[11]||(m[11]=et("内容:")),z("button",{type:"button",onClick:m[4]||(m[4]=f=>M.value=!M.value),style:{float:"right",height:"30px",padding:"0 10px"}},"html: "+re(M.value?"关":"开"),1)]),P(Qa,{type:M.value,modelValue:V.value,"onUpdate:modelValue":m[5]||(m[5]=f=>V.value=f)},null,8,["type","modelValue"])]),z("div",Wn,[m[14]||(m[14]=z("label",{for:"file"},"附件",-1)),P(J,{"file-list":r.value,"onUpdate:fileList":m[6]||(m[6]=f=>r.value=f),class:"upload-demo",action:"#","on-change":N,"auto-upload":!1},{tip:j(()=>m[13]||(m[13]=[z("div",{class:"el-upload__tip"}," jpg/png files with a size less than 500kb ",-1)])),default:j(()=>[P(Z,{type:"primary"},{default:j(()=>m[12]||(m[12]=[et("本地上传")])),_:1,__:[12]})]),_:1},8,["file-list"])]),z("div",Kn,[P(F,{onChange:Q,size:"large",modelValue:d.value,"onUpdate:modelValue":m[7]||(m[7]=f=>d.value=f),placeholder:"Select",style:{width:"110px"}},{default:j(()=>[P(v,{key:"public",label:"public",value:"public"}),P(v,{key:"private",label:"private",value:"private"}),P(v,{key:"global",label:"global",value:"global"}),P(v,{key:"all",label:"all",value:"all"})]),_:1},8,["modelValue"]),P(W,{modelValue:i.value,"onUpdate:modelValue":m[8]||(m[8]=f=>i.value=f),options:g.value,size:"large",placeholder:"请选择文件",style:{flex:"1"},multiple:"",filterable:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,"reserve-keyword":!1},null,8,["modelValue","options"])]),z("button",{type:"submit",disabled:a.value},re(a.value?"发送中...":"发送邮件"),9,Un),o.value?(A(),oe("div",{key:0,class:D(["message",o.value.type])},re(o.value.text),3)):he("",!0)],32)])}}},no=Ya(jn,[["__scopeId","data-v-3066ed8a"]]);export{no as default};
