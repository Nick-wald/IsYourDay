import{N as x,d as q,b as G,Z as J,q as M,ad as K,i as k,I as C,ah as Q,U as X,r as p,x as R,L as ee}from"./index-b-6tx6qQ.js";import{P as B,U as z,y as oe,t as te,z as ne}from"./vnode-sIyvmkMX.js";import{b as E,a as L,h as w,J as le,I as ae,T as F,B as O,ah as se,v as ue,af as ce,ai as ie,$ as P,aj as re,d as de,ak as fe,al as D}from"./base-B1x2bpfq.js";const ye=e=>{if(!e)return{onClick:x,onMousedown:x,onMouseup:x};let o=!1,a=!1;return{onClick:t=>{o&&a&&e(t),o=a=!1},onMousedown:t=>{o=t.target===t.currentTarget},onMouseup:t=>{a=t.target===t.currentTarget}}},ve=E({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:w([String,Array,Object])},zIndex:{type:w([String,Number])}}),me={click:e=>e instanceof MouseEvent},pe="overlay";var Ce=q({name:"ElOverlay",props:ve,emits:me,setup(e,{slots:o,emit:a}){const i=L(pe),l=d=>{a("click",d)},{onClick:s,onMousedown:t,onMouseup:r}=ye(e.customMaskEvent?void 0:l);return()=>e.mask?G("div",{class:[i.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:t,onMouseup:r},[M(o,"default")],B.STYLE|B.CLASS|B.PROPS,["onClick","onMouseup","onMousedown"]):J("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[M(o,"default")])}});const Be=Ce,be=E({center:Boolean,alignCenter:Boolean,closeIcon:{type:le},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),ke={close:()=>!0},we=E({...be,appendToBody:Boolean,appendTo:{type:oe.to.type,default:"body"},beforeClose:{type:w(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),Ee={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[z]:e=>ae(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ge=(e,o={})=>{K(e)||te("[useLockscreen]","You need to pass a ref param to this function");const a=o.ns||L("popup"),i=k(()=>a.bm("parent","hidden"));if(!F||O(document.body,i.value))return;let l=0,s=!1,t="0";const r=()=>{setTimeout(()=>{typeof document>"u"||s&&document&&(document.body.style.width=t,ce(document.body,i.value))},200)};C(e,d=>{if(!d){r();return}s=!O(document.body,i.value),s&&(t=document.body.style.width,se(document.body,i.value)),l=ne(a.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,f=ue(document.body,"overflowY");l>0&&(c||f==="scroll")&&s&&(document.body.style.width=`calc(100% - ${l}px)`)}),Q(()=>r())},Ie=(e,o)=>{var a;const l=X().emit,{nextZIndex:s}=ie();let t="";const r=P(),d=P(),c=p(!1),f=p(!1),m=p(!1),b=p((a=e.zIndex)!=null?a:s());let y,v;const N=re("namespace",fe),A=k(()=>{const n={},u=`--${N.value}-dialog`;return e.fullscreen||(e.top&&(n[`${u}-margin-top`]=e.top),e.width&&(n[`${u}-width`]=de(e.width))),n}),_=k(()=>e.alignCenter?{display:"flex"}:{});function V(){l("opened")}function $(){l("closed"),l(z,!1),e.destroyOnClose&&(m.value=!1)}function H(){l("close")}function I(){v?.(),y?.(),e.openDelay&&e.openDelay>0?{stop:y}=D(()=>T(),e.openDelay):T()}function g(){y?.(),v?.(),e.closeDelay&&e.closeDelay>0?{stop:v}=D(()=>S(),e.closeDelay):S()}function h(){function n(u){u||(f.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(n):g()}function U(){e.closeOnClickModal&&h()}function T(){F&&(c.value=!0)}function S(){c.value=!1}function Y(){l("openAutoFocus")}function W(){l("closeAutoFocus")}function Z(n){var u;((u=n.detail)==null?void 0:u.focusReason)==="pointer"&&n.preventDefault()}e.lockScroll&&ge(c);function j(){e.closeOnPressEscape&&h()}return C(()=>e.zIndex,()=>{var n;b.value=(n=e.zIndex)!=null?n:s()}),C(()=>e.modelValue,n=>{var u;n?(f.value=!1,I(),m.value=!0,b.value=(u=e.zIndex)!=null?u:s(),ee(()=>{l("open"),o.value&&(o.value.parentElement.scrollTop=0,o.value.parentElement.scrollLeft=0,o.value.scrollTop=0)})):c.value&&g()}),C(()=>e.fullscreen,n=>{o.value&&(n?(t=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=t)}),R(()=>{e.modelValue&&(c.value=!0,m.value=!0,I())}),{afterEnter:V,afterLeave:$,beforeLeave:H,handleClose:h,onModalClick:U,close:g,doClose:S,onOpenAutoFocus:Y,onCloseAutoFocus:W,onCloseRequested:j,onFocusoutPrevented:Z,titleId:r,bodyId:d,closed:f,style:A,overlayDialogStyle:_,rendered:m,visible:c,zIndex:b}};export{Be as E,we as a,ke as b,be as c,Ee as d,ye as e,Ie as u};
